name: Ruff

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      # 步骤 1: 运行 Linter (检查代码风格和错误)
      - name: Run Ruff Linter
        uses: astral-sh/ruff-action@v3
        with:
          # args 参数用于传递给 ruff 的命令
          # --output-format=github 会在 PR 的文件变动处直接显示标注(Annotations)
          args: "check --output-format=github ."

      # 步骤 2: 运行 Formatter (检查代码格式是否符合规范)
      # 如果你不需要检查格式（比如你不用 ruff format），可以删掉这一步
      - name: Run Ruff Formatter
        uses: astral-sh/ruff-action@v3
        with:
          # format --check 表示只检查不修改。如果格式不对，Action 会报错失败。
          args: "format --check ."
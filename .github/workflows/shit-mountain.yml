name: ğŸ’© å±å±±ä»£ç æ£€æµ‹

on:
  push:
    branches: [ main, master, dev/* ]
  pull_request:
    branches: [ main, master ]

jobs:
  shit-check:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write
    
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4
      
      - name: ä¸‹è½½ fuck-u-code
        run: |
          curl -L -o fuck-u-code \
            https://github.com/Done-0/fuck-u-code/releases/latest/download/fuck-u-code-linux-amd64
          chmod +x fuck-u-code

      - name: è¿è¡Œå±å±±åˆ†æ & è¯¦ç»†è¯„åˆ†
        id: analyze
        run: |
          ./fuck-u-code analyze --verbose --lang zh-CN --top 10 2>&1 | tee analysis.log
          
          SCORE=$(grep -oP "æ€»ä½“è¯„åˆ†:\s*\K[0-9.]+" analysis.log | head -1)
          if [ -z "$SCORE" ]; then SCORE="0"; fi
          
          echo "åŸå§‹åˆ†æ•°: $SCORE"
          
          # 11æ¡£ç²¾ç»†ç­‰çº§ï¼ˆå¯¹æ ‡æºç  QualityLevelsï¼‰
          EMOJI=""
          STATUS=""
          COLOR=""
          DESC=""
          ADVICE=""  # æ–°å¢ï¼šå…·ä½“å»ºè®®
          ALLOW_MERGE="true"
          
          if (( $(echo "$SCORE < 5" | bc -l) )); then
            EMOJI="ğŸŒ±"
            STATUS="æ¸…æ´çº§"
            COLOR="brightgreen"
            DESC="ä»£ç æ´ç™–è€…çš„æœåœ£åœ°ï¼Œå¯ä»¥ç›´æ¥æ‹¿å»å½“æ•™æ"
            ADVICE="å®Œç¾ï¼ç»§ç»­ä¿æŒï¼Œç”šè‡³å¯ä»¥å†™ç¯‡åšå®¢ç‚«è€€ä¸€ä¸‹"
            ALLOW_MERGE="true"
            echo "âœ¨ æ£€æµ‹ç»“æœï¼šæ¸…æ´çº§ - è¿™æ˜¯è‰ºæœ¯å“ï¼Œä¸æ˜¯ä»£ç "
            
          elif (( $(echo "$SCORE < 15" | bc -l) )); then
            EMOJI="ğŸŒ¸"
            STATUS="å¾®è‡­çº§"
            COLOR="green"
            DESC="ç•¥æœ‰å¼‚å‘³ï¼Œä½†å¼€çª—é€šé£å°±æ•£äº†ï¼Œå±äºå¯æ¥å—èŒƒå›´"
            ADVICE="è½»å¾®ç‘•ç–µï¼Œé¡ºæ‰‹é‡æ„ä¸€ä¸‹å³å¯"
            ALLOW_MERGE="true"
            echo "ğŸŒ¸ æ£€æµ‹ç»“æœï¼šå¾®è‡­çº§ - ç©ºæ°”æ¸…æ–°ï¼Œç•¥æœ‰èŠ±é¦™"
            
          elif (( $(echo "$SCORE < 25" | bc -l) )); then
            EMOJI="ğŸ˜"
            STATUS="ä¸­ç­‰æ··ä¹±"
            COLOR="yellowgreen"
            DESC="ä»£ç åˆ°äº†é’æ˜¥æœŸï¼Œæœ‰ç‚¹å›é€†ï¼Œä½†è¿˜èƒ½ç®¡æ•™"
            ADVICE="å»ºè®®é€‚å½“æ•´ç†ï¼Œåˆ«è®©æ··ä¹±ç§¯ç´¯"
            ALLOW_MERGE="true"
            echo "ğŸ˜ æ£€æµ‹ç»“æœï¼šä¸­ç­‰æ··ä¹± - é’æ˜¥æœŸçš„ä»£ç ï¼Œéœ€è¦é€‚å½“ç®¡æ•™"
            
          elif (( $(echo "$SCORE < 40" | bc -l) )); then
            EMOJI="ğŸ˜·"
            STATUS="ç³Ÿç³•çº§"
            COLOR="yellow"
            DESC="éœ€è¦æˆ´å£ç½©ç»´æŠ¤äº†ï¼Œæ··ä¹±åº¦å¼€å§‹å½±å“é˜…è¯»ä½“éªŒ"
            ADVICE="âš ï¸ æ³¨æ„ï¼šå»ºè®®è¿‘æœŸå®‰æ’é‡æ„è®¡åˆ’ï¼Œåˆ«è®©å€ºåŠ¡ç´¯ç§¯"
            ALLOW_MERGE="true"
            echo "ğŸ˜· æ£€æµ‹ç»“æœï¼šç³Ÿç³•çº§ - å»ºè®®æˆ´å£ç½©é˜…è¯»"
            
          elif (( $(echo "$SCORE < 55" | bc -l) )); then
            # ä½ ä»¬åœ¨çš„è¿™ä¸ªæ¡£ä½ï¼Œå†ç»†åˆ†3ä¸ªå­æ¡£
            if (( $(echo "$SCORE < 45" | bc -l) )); then
              SUB="è½»åº¦"
              DESC="å±å±±åˆšå¼€å§‹å‘é…µï¼Œè‡­å‘³åˆæ˜¾ï¼Œä½†è¿˜èƒ½æŠ¢æ•‘"
            elif (( $(echo "$SCORE < 50" | bc -l) )); then
              SUB="ä¸­åº¦"  
              DESC="å±å±±å·²ç»å½¢æˆï¼Œå¼€çª—ä¹Ÿæ•‘ä¸äº†ï¼Œå»ºè®®è°¨æ…ç»´æŠ¤"
            else
              SUB="é‡åº¦"
              DESC="å±å±±é‡åº¦æ±¡æŸ“ï¼Œç»´æŠ¤éš¾åº¦é™¡å¢ï¼Œé‡æ„è¿«åœ¨çœ‰ç«"
            fi
            
            EMOJI="ğŸ’©"
            STATUS="${SUB}å±å±±çº§"
            COLOR="orange"
            ADVICE="ğŸ’¡ **é‡ç‚¹ä¼˜åŒ–å»ºè®®**ï¼š\n1. ä¼˜å…ˆæ‹†åˆ†å¾ªç¯å¤æ‚åº¦ >15 çš„å‡½æ•°\n2. ç»™0æ³¨é‡Šçš„å‡½æ•°è¡¥æ–‡æ¡£\n3. è€ƒè™‘æ¨¡å—æ‹†åˆ†ï¼Œåˆ«è®©æ–‡ä»¶è¶…è¿‡500è¡Œ"
            ALLOW_MERGE="true"
            echo "ğŸ’© æ£€æµ‹ç»“æœï¼š${SUB}å±å±±çº§(40-54åˆ†æ¡£) - ä»£ç å¼€å§‹æ•£å‘ä¸å¯æè¿°çš„æ°”å‘³"
            
          elif (( $(echo "$SCORE < 65" | bc -l) )); then
            EMOJI="ğŸ¤•"
            STATUS="ç¾éš¾çº§"
            COLOR="red"
            DESC="ç»´æŠ¤å›°éš¾ï¼Œæ¯æ¬¡æ”¹åŠ¨éƒ½å¯èƒ½å¼•å‘è´è¶æ•ˆåº”"
            ADVICE="ğŸš¨ **è­¦å‘Š**ï¼šå»ºè®®æš‚åœåŠŸèƒ½å¼€å‘ï¼Œå…ˆè¿˜å€º\n- é‡ç‚¹å…³æ³¨å¾ªç¯å¤æ‚åº¦ >20 çš„å‡½æ•°\n- è€ƒè™‘é‡å†™éƒ¨åˆ†æ ¸å¿ƒé€»è¾‘"
            ALLOW_MERGE="false"
            echo "::warning::ğŸ¤• æ£€æµ‹ç»“æœï¼šç¾éš¾çº§ - ç»´æŠ¤åƒæ‰“å‰¯æœ¬ï¼Œå»ºè®®é‡æ„"
            
          elif (( $(echo "$SCORE < 75" | bc -l) )); then
            EMOJI="â˜£ï¸"
            STATUS="ä¸¥é‡ç¾éš¾"
            COLOR="#DC143C"  # çŒ©çº¢è‰²
            DESC="éš¾ä»¥ç»´æŠ¤ï¼Œä»£ç å·²æˆé—è¿¹ï¼Œåªæœ‰è€ƒå¤å­¦å®¶èƒ½çœ‹æ‡‚"
            ADVICE="â˜£ï¸ **ä¸¥é‡è­¦å‘Š**ï¼šå»ºè®®å¤§å¹…é‡æ„æˆ–é‡å†™\n- å½“å‰ä»£ç å·²äº§ç”Ÿé«˜é¢æŠ€æœ¯å€ºåŠ¡\n- æ–°åŠŸèƒ½å¼€å‘æ•ˆç‡å°†æä½"
            ALLOW_MERGE="false"
            echo "::warning::â˜£ï¸ æ£€æµ‹ç»“æœï¼šä¸¥é‡ç¾éš¾çº§ - ä»£ç å·²æˆé—è¿¹"
            
          elif (( $(echo "$SCORE < 85" | bc -l) )); then
            EMOJI="ğŸ§Ÿ"
            STATUS="éå¸¸ç³Ÿç³•"
            COLOR="#8B0000"  # æ·±çº¢
            DESC="æ¥è¿‘ä¸å¯æ•‘è¯ï¼Œæ¯æ¬¡æäº¤éƒ½æ˜¯ä¸€æ¬¡å†’é™©"
            ADVICE="ğŸ’€ **å±é™©**ï¼šå»ºè®®ç«‹å³åœæ­¢åŠŸèƒ½å¼€å‘ï¼Œå…¨é¢é‡æ„\n- è€ƒè™‘ä½¿ç”¨è®¾è®¡æ¨¡å¼è§£è€¦\n- å»ºç«‹å®Œæ•´çš„å•å…ƒæµ‹è¯•åå†é‡æ„"
            ALLOW_MERGE="false"
            echo "::error::ğŸ§Ÿ æ£€æµ‹ç»“æœï¼šéå¸¸ç³Ÿç³•çº§ - ä»£ç åƒåƒµå°¸ï¼Œæ­»è€Œä¸åƒµ"
            
          elif (( $(echo "$SCORE < 95" | bc -l) )); then
            EMOJI="â˜¢ï¸"
            STATUS="æç«¯ç¾éš¾"
            COLOR="purple"
            DESC="å®Œå…¨å¤±æ§ï¼Œå»ºè®®é‡å†™è€Œéé‡æ„"
            ADVICE="â˜¢ï¸ **æåº¦å±é™©**ï¼šå»ºè®®åºŸå¼ƒå½“å‰å®ç°ï¼Œé‡å†™æ¯”ä¿®å¤æ›´åˆ’ç®—"
            ALLOW_MERGE="false"
            echo "::error::â˜¢ï¸ æ£€æµ‹ç»“æœï¼šæç«¯ç¾éš¾çº§ - å»ºè®®æ”¾å¼ƒæ²»ç–—"
            
          elif (( $(echo "$SCORE < 100" | bc -l) )); then
            EMOJI="ğŸª¦"
            STATUS="åºŸå¼ƒçº§"
            COLOR="#4B0082"  # é›ç´«
            DESC="å·²åºŸå¼ƒä»£ç ï¼Œä»…ä¾›å‚è§‚è­¦ç¤ºåäºº"
            ADVICE="ğŸª¦ **å¢“å¿—é“­çº§**ï¼šè¿™æ®µä»£ç å·²ç»æ­»äº†ï¼Œå»ºè®®ç«‹ä¸ªå¢“ç¢‘ç„¶åé‡å†™"
            ALLOW_MERGE="false"
            echo "::error::ğŸª¦ æ£€æµ‹ç»“æœï¼šåºŸå¼ƒçº§ - å»ºè®®ç›´æ¥åˆ åº“"
            
          else  # æ»¡åˆ†100
            EMOJI="ğŸ‘‘ğŸ’©"
            STATUS="ç»ˆæç¾éš¾"
            COLOR="black"
            DESC="çƒ‚åˆ°æè‡´ï¼Œå·²è¶…è¶Šäººç±»ç†è§£èŒƒç•´ï¼Œå»ºè®®ç”³è¯·æ–‡åŒ–é—äº§ä¿æŠ¤"
            ADVICE="ğŸ‘‘ğŸ’© **ç¥çº§å±å±±**ï¼šå»ºè®®æˆªå›¾ç•™å¿µï¼Œåšæˆæ˜ä¿¡ç‰‡è­¦ç¤ºåäººï¼Œç„¶ååˆ åº“è·‘è·¯"
            ALLOW_MERGE="false"
            echo "::error::ğŸ‘‘ğŸ’© æ£€æµ‹ç»“æœï¼šç»ˆæç¾éš¾çº§ - è¿™æ˜¯è‰ºæœ¯å“ï¼Œå»ºè®®é€åšç‰©é¦†"
          fi
          
          # è¾“å‡ºåˆ°ç¯å¢ƒ
          echo "score=$SCORE" >> $GITHUB_OUTPUT
          echo "status=$STATUS" >> $GITHUB_OUTPUT
          echo "emoji=$EMOJI" >> $GITHUB_OUTPUT
          echo "color=$COLOR" >> $GITHUB_OUTPUT
          echo "desc=$DESC" >> $GITHUB_OUTPUT
          echo "advice=$ADVICE" >> $GITHUB_OUTPUT
          echo "allow_merge=$ALLOW_MERGE" >> $GITHUB_OUTPUT
          
          # ç”Ÿæˆå¸¦è¯¦ç»†å»ºè®®çš„æ‘˜è¦
          echo "### $EMOJI å±å±±æ£€æµ‹æ‘˜è¦ï¼ˆ11æ¡£ç²¾ç»†ç‰ˆï¼‰" >> $GITHUB_STEP_SUMMARY
          echo "| æŒ‡æ ‡ | æ•°å€¼ |" >> $GITHUB_STEP_SUMMARY
          echo "|------|------|" >> $GITHUB_STEP_SUMMARY
          echo "| **æ€»ä½“è¯„åˆ†** | $SCORE / 100 |" >> $GITHUB_STEP_SUMMARY
          echo "| **å±å±±ç­‰çº§** | $STATUS |" >> $GITHUB_STEP_SUMMARY
          echo "| **ç­‰çº§æè¿°** | $DESC |" >> $GITHUB_STEP_SUMMARY
          echo "| **åˆå¹¶å»ºè®®** | $([ "$ALLOW_MERGE" == "true" ] && echo "âœ… å…è®¸" || echo "âŒ ç¦æ­¢") |" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**ğŸ’¡ ä¼˜åŒ–å»ºè®®**" >> $GITHUB_STEP_SUMMARY
          echo "$ADVICE" >> $GITHUB_STEP_SUMMARY
      
      # åœ¨ PR è¯„è®ºé‡Œæ˜¾ç¤ºè¯¦ç»†ç­‰çº§
      - name: PR è¯„è®ºï¼ˆæ°›å›´ç‰ˆï¼‰
        if: github.event_name == 'pull_request'
        uses: actions/github-script@v7
        with:
          script: |
            const score = parseFloat('${{ steps.analyze.outputs.score }}');
            const status = '${{ steps.analyze.outputs.status }}';
            const emoji = '${{ steps.analyze.outputs.emoji }}';
            const desc = '${{ steps.analyze.outputs.desc }}';
            const allowMerge = '${{ steps.analyze.outputs.allow_merge }}';
            
            // æ•´ä½“æ°›å›´è¯„ä»·ï¼ˆä¸é’ˆå¯¹å…·ä½“ä»£ç ï¼Œåªè°ˆæ„Ÿè§‰ï¼‰
            let vibe = '';
            let nextMove = '';
            
            if (score < 5) {
              vibe = 'è¿™ä»£ç ä¼˜é›…å¾—åƒé¦–è¯—ï¼Œ>Reviewer å¯ä»¥å®‰å¿ƒå–èŒ¶äº†ã€‚';
              nextMove = 'ç»§ç»­ä¿æŒï¼Œç”šè‡³å¯ä»¥ç”³è¯·å½“å¼€æºé¡¹ç›®èŒƒæœ¬ã€‚';
            } else if (score < 15) {
              vibe = 'ä»£ç æœ‰ç‚¹å°è„¾æ°”ï¼Œä½†è¿˜åœ¨å¯æ§èŒƒå›´å†…ã€‚';
              nextMove = 'é¡ºæ‰‹ä¿®ä¿®é£æ ¼é—®é¢˜ï¼Œä¸ç€æ€¥ã€‚';
            } else if (score < 25) {
              vibe = 'ä»£ç å¼€å§‹æœ‰è‡ªå·±çš„æƒ³æ³•äº†ï¼Œéœ€è¦é€‚å½“ç®¡æ•™ã€‚';
              nextMove = 'å»ºè®®ä¸‹æ¬¡è¿­ä»£æ—¶é¡ºä¾¿ç†ç†é€»è¾‘ã€‚';
            } else if (score < 40) {
              vibe = 'è¯»èµ·æ¥éœ€è¦ä¸€ç‚¹å‹‡æ°”ï¼Œä½†è¿˜æ²¡åˆ°åŠé€€åœ°æ­¥ã€‚';
              nextMove = 'å»ºè®®å®‰æ’ä¸ªæŠ€æœ¯å€ºåŠ¡æ¸…ç†æ—¥ã€‚';
            } else if (score < 55) {
              // å±å±±çº§ç»†åˆ†æ°›å›´
              if (score < 45) {
                vibe = 'èƒ½è·‘ï¼Œä½†åˆ«é—®ä¸ºä»€ä¹ˆèƒ½è·‘ã€‚é—®å°±æ˜¯ç„å­¦ã€‚';
                nextMove = 'å»ºè®®è¶è¿˜æ²¡æˆä¸ºåèƒœå¤è¿¹ä¹‹å‰ä¼˜åŒ–ä¸€ä¸‹ã€‚';
              } else if (score < 50) {
                vibe = 'å¼€çª—å·²ç»æ²¡ç”¨äº†ï¼Œå»ºè®®ä½©æˆ´å¿ƒç†é˜²æ¯’é¢å…·ã€‚';
                nextMove = 'é‡æ„è®¡åˆ’è¯¥æä¸Šæ—¥ç¨‹äº†ï¼Œå¦åˆ™ä¸‹ä¸€ä¸ªæ¥æ‰‹çš„äººä¼šæƒ³æ‰¾ä½ èŠå¤©ã€‚';
              } else {
                vibe = 'è¿™ä»£ç æœ‰å®ƒè‡ªå·±çš„åšæŒï¼Œå»ºè®®åˆ«æƒ¹å®ƒç”Ÿæ°”ã€‚';
                nextMove = 'åšåŠŸèƒ½å‰å…ˆç¥ˆç¥·ï¼Œæ”¹ä¸€è¡Œæµ‹è¯•åéã€‚';
              }
            } else if (score < 65) {
              vibe = 'ç»´æŠ¤è¿™æ®µä»£ç éœ€è¦é¢å¤–çš„å¿ƒç†å»ºè®¾ã€‚';
              nextMove = 'è€ƒè™‘ä¸€ä¸‹ï¼šé‡æ„ vs é‡å†™ vs è¾èŒã€‚';
            } else if (score < 75) {
              vibe = 'ä»£ç å·²æˆé—è¿¹ï¼Œå»ºè®®è¯·è€ƒå¤å­¦å®¶æ¥ç»´æŠ¤ã€‚';
              nextMove = 'åˆ«æƒ³ç€ä¼˜åŒ–äº†ï¼Œèƒ½ä¸åŠ¨å°±ä¸åŠ¨ï¼Œæ´»ç€æœ€é‡è¦ã€‚';
            } else if (score < 85) {
              vibe = 'æ¯æ¬¡æäº¤éƒ½æ˜¯ä¸€åœºå†’é™©ï¼Œå»ºè®®è´­ä¹°ä¿é™©ã€‚';
              nextMove = 'å»ºè®®æŠŠè¿™æ®µä»£ç ä¾›èµ·æ¥ï¼Œé‡å†™æ¯”ä¿®å¤åˆ’ç®—ã€‚';
            } else if (score < 95) {
              vibe = 'è¿™ä¸æ˜¯ä»£ç ï¼Œè¿™æ˜¯è¡Œä¸ºè‰ºæœ¯ã€‚';
              nextMove = 'å»ºè®®æˆªå›¾ç•™å¿µï¼Œç„¶åè€ƒè™‘é‡æ–°æŠ•èƒï¼ˆæˆ–è€…é‡å†™ï¼‰ã€‚';
            } else if (score < 100) {
              vibe = 'è¿™æ®µä»£ç å·²ç»æ­»äº†ï¼Œåªæ˜¯è¿˜æ²¡åŸ‹ã€‚';
              nextMove = 'ç«‹ä¸ªå¢“ç¢‘ï¼Œå†™ä¸Šå‰äººæ•™è®­ï¼Œç„¶å rm -rfã€‚';
            } else {
              vibe = 'ç™»å³°é€ æï¼Œå²æ— å‰ä¾‹ï¼Œå»ºè®®ç”³é—ã€‚';
              nextMove = 'åˆ åº“è·‘è·¯æ˜¯æœ€ä½³é€‰æ‹©ï¼Œæˆ–è€…è½¬è¡Œå–ç…é¥¼ã€‚';
            }
            
            const mergeBadge = allowMerge === 'true' 
              ? '![å…è®¸åˆå¹¶](https://img.shields.io/badge/åˆå¹¶å»ºè®®-å…è®¸-brightgreen)'
              : '![ç¦æ­¢åˆå¹¶](https://img.shields.io/badge/åˆå¹¶å»ºè®®-ç¦æ­¢-red)';
            
            const body = '## ' + emoji + ' å±å±±ä»£ç æ£€æµ‹æŠ¥å‘Š ' + mergeBadge + '\n\n' +
              'ğŸ¯ **æœ¬æ¬¡æ£€æµ‹æ¦‚è§ˆ**\n\n' +
              '> ã€Œ' + desc + 'ã€\n\n' +
              '| ç»´åº¦ | æ•°æ® |\n' +
              '|:------|:------|\n' +
              '| **å±å±±æŒ‡æ•°** | `' + score.toFixed(2) + ' / 100` |\n' +
              '| **å±å±±ç­‰çº§** | **' + status + '** |\n' +
              '| **æ£€æµ‹æ—¶é—´** | ' + new Date().toLocaleString('zh-CN', { timeZone: 'Asia/Shanghai' }) + ' |\n\n' +
              '### ğŸ­ æ•´ä½“å°è±¡\n' +
              vibe + '\n\n' +
              '### ğŸ§­ ä¸‹ä¸€æ­¥\n' +
              nextMove + '\n\n' +
              '---\n\n' +
              '**ğŸ“¥ è¯¦ç»†æ•°æ®**\n' +
              '- [æŸ¥çœ‹å®Œæ•´åˆ†ææŠ¥å‘Š](https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }})\n' +
              '- [ä¸‹è½½ Markdown æŠ¥å‘Š](https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}/artifacts)\n\n' +
              '*ç”± [fuck-u-code](https://github.com/Done-0/fuck-u-code) è‡ªåŠ¨æ£€æµ‹ Â· æœ¬è¯„è®ºä¸ä»£è¡¨äººç±»è§‚ç‚¹*';

            // è·å–ç°æœ‰è¯„è®º
            const comments = await github.rest.issues.listComments({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
            });
            
            // æŸ¥æ‰¾æœºå™¨äººä¹‹å‰å‘çš„å±å±±æ£€æµ‹æŠ¥å‘Šè¯„è®º
            const botComment = comments.data.find(comment =>
              comment.user.type === 'Bot' &&
              comment.body.includes('å±å±±ä»£ç æ£€æµ‹æŠ¥å‘Š')
            );
            
            if (botComment) {
              // å¦‚æœå·²æœ‰è¯„è®ºï¼Œæ›´æ–°å®ƒ
              await github.rest.issues.updateComment({
                owner: context.repo.owner,
                repo: context.repo.repo,
                comment_id: botComment.id,
                body: body
              });
            } else {
              // å¦‚æœæ²¡æœ‰ï¼Œåˆ›å»ºæ–°è¯„è®º
              await github.rest.issues.createComment({
                issue_number: context.issue.number,
                owner: context.repo.owner,
                repo: context.repo.repo,
                body: body
              });
            }
      
      # æ ¹æ®ç­‰çº§å†³å®šæ˜¯å¦é˜»æ–­åˆå¹¶ï¼ˆå¯é€‰ï¼‰
      - name: é—¨ç¦æ£€æŸ¥ï¼ˆå¯é€‰ï¼‰
        if: steps.analyze.outputs.allow_merge != 'true'
        run: |
          echo "âŒ å±å±±æŒ‡æ•° ${{ steps.analyze.outputs.score }} å·²è¾¾åˆ°ã€Œ${{ steps.analyze.outputs.status }}ã€çº§åˆ«"
          echo "   ${{ steps.analyze.outputs.desc }}"
          echo "::error::ä»£ç è´¨é‡æœªè¾¾æ ‡ï¼Œå»ºè®®é‡æ„åå†åˆå¹¶"
          # éœ€è¦é˜»æ–­å°±å–æ¶ˆä¸‹é¢è¿™è¡Œçš„æ³¨é‡Šï¼š
          # exit 1